{"version":3,"file":"EnableCrossOriginCommunication.js","names":["handshake","editor","then","response","console","debug","connection","connectToEditor","methods","promise","runEditableDiscovery","runFrameDetailsObserver","runNavigationHandler"],"sources":["../src/EnableCrossOriginCommunication.tsx"],"sourcesContent":["/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport { connectToParent as connectToEditor } from \"penpal\";\nimport {\n  runEditableDiscovery,\n  runFrameDetailsObserver,\n  runNavigationHandler,\n} from \"@aem-sites/universal-editor-overlays\";\nimport { methods } from \"./methods\";\nimport { EditorApi } from \"./types\";\n\nconst handshake = ({ editor }) => {\n  // todo: move somwhere else and convert this handshake to connection test and run in interval\n  editor.handshake().then((response) => {\n    console.debug(\"[+] response from editor: \", { response });\n  });\n};\n\n(async () => {\n  // wait for penpal to establish connection between editor and app\n  const connection = connectToEditor({ methods });\n  const editor = (await connection.promise) as EditorApi;\n\n  // list of routines executed inside of the remote app\n  runEditableDiscovery({ editor });\n  runFrameDetailsObserver({ editor });\n  runNavigationHandler({ editor });\n  handshake({ editor });\n})();\n"],"mappings":";;;;AAYA;;AACA;;AAKA;;+CAjBA,oJ;;;;;;AAoBA,IAAMA,SAAS,GAAG,SAAZA,SAAY,OAAgB;EAAA,IAAbC,MAAa,QAAbA,MAAa;EAChC;EACAA,MAAM,CAACD,SAAP,GAAmBE,IAAnB,CAAwB,UAACC,QAAD,EAAc;IACpCC,OAAO,CAACC,KAAR,CAAc,4BAAd,EAA4C;MAAEF,QAAQ,EAARA;IAAF,CAA5C;EACD,CAFD;AAGD,CALD;;AAOA,2DAAC;EAAA;EAAA;IAAA;MAAA;QAAA;UACC;UACMG,UAFP,GAEoB,IAAAC,uBAAA,EAAgB;YAAEC,OAAO,EAAPA;UAAF,CAAhB,CAFpB;UAAA;UAAA,OAGuBF,UAAU,CAACG,OAHlC;;QAAA;UAGOR,MAHP;UAKC;UACA,IAAAS,6CAAA,EAAqB;YAAET,MAAM,EAANA;UAAF,CAArB;UACA,IAAAU,gDAAA,EAAwB;YAAEV,MAAM,EAANA;UAAF,CAAxB;UACA,IAAAW,6CAAA,EAAqB;YAAEX,MAAM,EAANA;UAAF,CAArB;UACAD,SAAS,CAAC;YAAEC,MAAM,EAANA;UAAF,CAAD,CAAT;;QATD;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAD"}