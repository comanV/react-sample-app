{"version":3,"file":"EditableDiscovery.js","names":["EditableDiscovery","callback","useEditableDiscovery","editables","editablesMemo","useMemo","useEffect","runEditableDiscovery","editor","repaintEditables","discoveryContainer","document","createElement","discovery","ReactDOM","createRoot","render","body","appendChild"],"sources":["../src/EditableDiscovery.tsx"],"sourcesContent":["/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport React, { useEffect, useMemo } from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { useEditableDiscovery } from \"./hooks\";\nimport { EditablesList, EditorApi } from \"./types\";\n\nconst EditableDiscovery = ({ callback }): JSX.Element => {\n  const { editables } = useEditableDiscovery();\n  const editablesMemo = useMemo<EditablesList>(() => editables, [editables]);\n\n  useEffect(() => {\n    callback && callback({ editables: editablesMemo });\n  }, [callback, editablesMemo]);\n\n  return <></>;\n};\n\nconst runEditableDiscovery = ({ editor }: EditorApi): void => {\n  // discovery callback\n  const callback = ({ editables }: EditablesList) => {\n    editor.repaintEditables({ editables });\n  };\n\n  // render EditableDiscovery to start editable discovery observer\n  const discoveryContainer = document.createElement(\"div\");\n  const discovery = ReactDOM.createRoot(discoveryContainer);\n  discovery.render(<EditableDiscovery callback={callback} />);\n  document.body.appendChild(discoveryContainer);\n};\n\nexport { EditableDiscovery, runEditableDiscovery };\n"],"mappings":";;;;;;;;;AAYA;;AACA;;AACA;;;;;;;;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,OAA+B;EAAA,IAA5BC,QAA4B,QAA5BA,QAA4B;;EACvD,4BAAsB,IAAAC,2BAAA,GAAtB;EAAA,IAAQC,SAAR,yBAAQA,SAAR;;EACA,IAAMC,aAAa,GAAG,IAAAC,cAAA,EAAuB;IAAA,OAAMF,SAAN;EAAA,CAAvB,EAAwC,CAACA,SAAD,CAAxC,CAAtB;EAEA,IAAAG,gBAAA,EAAU,YAAM;IACdL,QAAQ,IAAIA,QAAQ,CAAC;MAAEE,SAAS,EAAEC;IAAb,CAAD,CAApB;EACD,CAFD,EAEG,CAACH,QAAD,EAAWG,aAAX,CAFH;EAIA,oBAAO,iEAAP;AACD,CATD;;;;AAWA,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,QAAiC;EAAA,IAA9BC,MAA8B,SAA9BA,MAA8B;;EAC5D;EACA,IAAMP,QAAQ,GAAG,SAAXA,QAAW,QAAkC;IAAA,IAA/BE,SAA+B,SAA/BA,SAA+B;IACjDK,MAAM,CAACC,gBAAP,CAAwB;MAAEN,SAAS,EAATA;IAAF,CAAxB;EACD,CAFD,CAF4D,CAM5D;;;EACA,IAAMO,kBAAkB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAA3B;;EACA,IAAMC,SAAS,GAAGC,kBAAA,CAASC,UAAT,CAAoBL,kBAApB,CAAlB;;EACAG,SAAS,CAACG,MAAV,eAAiB,gCAAC,iBAAD;IAAmB,QAAQ,EAAEf;EAA7B,EAAjB;EACAU,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,kBAA1B;AACD,CAXD"}